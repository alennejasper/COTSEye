{% extends "public/index/index.html" %}
{% load static %}

{% block content %}
<div class = "map">
    <div class = "public-map">
    </div>
</div>

{% if messages %}
{% for message in messages %}
    <script src = "https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% if message.tags == "info" %}<script>Swal.fire({title: "Hey!", text: "{{message}}", background: "#FFFFFF", icon: "warning", iconColor: "#154360", allowOutsideClick: false, allowEscapeKey: false, confirmButtonColor: "#154360", customClass: {confirmButton: "info-button", title: "title"}})</script>
    {% elif message.tags == "success" %}<script>Swal.fire({title: "Yay!", text: "{{message}}", background: "#FFFFFF", icon: "success", iconColor: "#698F3F", allowOutsideClick: false, allowEscapeKey: false, confirmButtonColor: "#698F3F", customClass: {confirmButton: "success-button", title: "title"}})</script>
    {% else %}<script>Swal.fire({title: "Oops!", text: "{{message}}", background: "#FFFFFF", icon: "error", iconColor: "#C90016", allowOutsideClick: false, allowEscapeKey: false, confirmButtonColor: "#C90016", customClass: {confirmButton: "error-button", title: "title"}})</script>
    {% endif %}    
{% endfor %}
{% endif %}

<script src = "https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity = "sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin = ""></script>

<script>
    var map;

    function revealMap(){
        var publicMap = document.getElementsByClassName("public-map")[0];

        map = L.map(publicMap, {zoomControl: true, scrollWheelZoom: false, dragging: true, maxBounds: [[5.3, 124.3],[6.3, 126.3]]}).setView([5.9656, 125.1929], 11);

        L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}", {minZoom: 11, attribution: "ESRI"}).addTo(map);

        var starfish = L.icon({iconUrl: "{% static 'assets/icons/marker.png' %}", iconSize: [30, 30], iconAnchor: [15, 15]});

        {% for post in posts %}
            L.marker([{{post.coordinates.latitude}}, {{post.coordinates.longitude}}], {icon: starfish}).addTo(map);
        {% endfor %}
    }

    window.addEventListener("load", function (){
        revealMap();
    });
</script>

<style>
    .swal2-popup{
        padding-bottom: 15px !important;
        border-radius: 5px !important;
        border: 1px solid #B2BEB5 !important; 
        box-shadow: 0 0 0 1px #B2BEB5 !important;
    }

    .swal2-popup .swal2-styled:focus{
        box-shadow: none !important;
    }

    div:where(.swal2-container) .swal2-html-container{
        padding: 10px 30px 0em 30px !important;
        margin: 0px !important;
        font-family: "Overlock" !important;
        font-weight: 400 !important;
        font-size: 20px !important;
        color: #154360 !important;
    }

    @media screen and (min-width: 369px) and (max-width: 445px){
        div:where(.swal2-container) .swal2-html-container{
            padding: 10px 30px 0em 30px !important;
            margin: 0px !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 18px !important;
            color: #154360 !important;
        }
    }

    @media screen and (min-width: 349px) and (max-width: 368px){
        div:where(.swal2-container) .swal2-html-container{
            padding: 10px 30px 0em 30px !important;
            margin: 0px !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 16px !important;
            color: #154360 !important;
        }
    }

    @media screen and (min-width: 320px) and (max-width: 348px){
        div:where(.swal2-container) .swal2-html-container{
            padding: 10px 30px 0em 30px !important;
            margin: 0px !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 14px !important;
            color: #154360 !important;
        }
    }

    div:where(.swal2-icon){
        margin: 15px auto 0em auto !important;
    }

    div:where(.swal2-icon).swal2-success .swal2-success-ring{
        border: 0.25em solid #698F3F !important;
    }

    div:where(.swal2-icon).swal2-success [class ^= swal2-success-line]{
        background-color: #698F3F !important;
    }

    div:where(.swal2-icon).swal2-error [class ^= swal2-x-mark-line]{
        background-color: #C90016 !important;
    }

    div:where(.swal2-container) h2:where(.swal2-title){
        padding: 15px 30px 0em 30px !important;
    }

    .title{
        font-family: "Philosopher" !important;
        font-weight: 700 !important;
        font-size: 22px !important;   
        color: #154360 !important;
        pointer-events: none !important;
    }

    @media screen and (min-width: 369px) and (max-width: 445px){
        .title{
            font-family: "Philosopher" !important;
            font-weight: 700 !important;
            font-size: 20px !important;   
            color: #154360 !important;
            pointer-events: none !important;
        }
    }

    @media screen and (min-width: 349px) and (max-width: 368px){
        .title{
            font-family: "Philosopher" !important;
            font-weight: 700 !important;
            font-size: 18px !important;   
            color: #154360 !important;
            pointer-events: none !important;
        }
    }

    @media screen and (min-width: 320px) and (max-width: 348px){
        .title{
            font-family: "Philosopher" !important;
            font-weight: 700 !important;
            font-size: 16px !important;   
            color: #154360 !important;
            pointer-events: none !important;
        }
    }

    div:where(.swal2-container) div:where(.swal2-actions){
        margin: 15px auto 0 !important;
    }

    .swal2-actions{
        padding-top: 5px !important;
        padding-bottom: 5px !important;
        height: fit-content !important;
    }

    .info-button{
        visibility: hidden;
        font-size: 0px !important;
    }

    .info-button::before{
        padding-left: 10px !important;
        padding-right: 10px !important;
        padding-top: 5px !important;
        padding-bottom: 5px !important;
        content: "Ok" !important;
        visibility: visible !important;
        border: 1px solid #B2BEB5 !important; 
        border-radius: 5px !important;
        box-shadow: 0 0 0 1px #B2BEB5 !important;
        outline: none !important;
        font-family: "Overlock" !important;
        font-weight: 400 !important;
        font-size: 20px !important;
        background-color: #154360 !important;
        color: #FFFFFF !important;
        pointer-events: auto !important;
        cursor: pointer;
    }

    .info-button:hover{
        background-color: #10354C !important;
        color: #B2BEB5 !important;        
    }

    @media screen and (min-width: 369px) and (max-width: 445px){
        .info-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 18px !important;
            background-color: #154360 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 349px) and (max-width: 368px){
        .info-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 16px !important;
            background-color: #154360 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 320px) and (max-width: 348px){
        .info-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 14px !important;
            background-color: #154360 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    .success-button{
        visibility: hidden;
        font-size: 0px !important;
    }

    .success-button::before{
        padding-left: 10px !important;
        padding-right: 10px !important;
        padding-top: 5px !important;
        padding-bottom: 5px !important;
        content: "Ok" !important;
        visibility: visible !important;
        border: 1px solid #B2BEB5 !important; 
        border-radius: 5px !important;
        box-shadow: 0 0 0 1px #B2BEB5 !important;
        outline: none !important;
        font-family: "Overlock" !important;
        font-weight: 400 !important;
        font-size: 20px !important;
        background-color: #698F3F !important;
        color: #FFFFFF !important;
        pointer-events: auto !important;
        cursor: pointer;
    }

    .success-button:hover{
        background-color: #557433 !important;
        color: #B2BEB5 !important;        
    }

    @media screen and (min-width: 369px) and (max-width: 445px){
        .success-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 18px !important;
            background-color: #698F3F !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 349px) and (max-width: 368px){
        .success-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 16px !important;
            background-color: #698F3F !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 320px) and (max-width: 348px){
        .success-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 14px !important;
            background-color: #698F3F !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    .error-button{
        visibility: hidden;
        font-size: 0px !important;
    }

    .error-button::before{
        padding-left: 10px !important;
        padding-right: 10px !important;
        padding-top: 5px !important;
        padding-bottom: 5px !important;
        content: "Ok" !important;
        visibility: visible !important;
        border: 1px solid #B2BEB5 !important; 
        border-radius: 5px !important;
        box-shadow: 0 0 0 1px #B2BEB5 !important;
        outline: none !important;
        font-family: "Overlock" !important;
        font-weight: 400 !important;
        font-size: 20px !important;
        background-color: #C90016 !important;
        color: #FFFFFF !important;
        pointer-events: auto !important;
        cursor: pointer;
    }

    .error-button:hover{
        background-color: #A00011 !important;
        color: #B2BEB5 !important;        
    }

    @media screen and (min-width: 369px) and (max-width: 445px){
        .error-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 18px !important;
            background-color: #C90016 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 349px) and (max-width: 368px){
        .error-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 16px !important;
            background-color: #C90016 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }

    @media screen and (min-width: 320px) and (max-width: 348px){
        .error-button::before{
            padding-left: 10px !important;
            padding-right: 10px !important;
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            content: "Ok" !important;
            visibility: visible !important;
            border: 1px solid #B2BEB5 !important; 
            border-radius: 5px !important;
            box-shadow: 0 0 0 1px #B2BEB5 !important;
            outline: none !important;
            font-family: "Overlock" !important;
            font-weight: 400 !important;
            font-size: 14px !important;
            background-color: #C90016 !important;
            color: #FFFFFF !important;
            pointer-events: auto !important;
            cursor: pointer;
        }
    }
</style>
{% endblock content %}