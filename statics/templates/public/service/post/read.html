{% extends "contributor/service/index/index.html" %}
{% load static %}


{% block content %}
    <div class = "postandfeedread-body">
        <div class = "postandfeedread-section">
            <h1>POST DETAILS</h1>
        </div>

        {% if valid_post %}
            <div class = "postandfeedread">
                <div class = "postandfeedread-header">
                    <p><img src = "{{valid_post.user.profile_photo.url}}">{{valid_post.user}}</p>

                    <p>{{valid_post.capture_date | date:'m/d/y' | default:'None available'}}</p>
                </div>

                <div class = "postandfeedread-gallery">
                    {% for post_photo in valid_post.post_photos.all %}
                        <img src = "{{post_photo.post_photo.url}}">
                    {% endfor %}
                </div>

                <div class = "postandfeedread-origin">
                    <p>{{valid_post.location | default:'None available'}}</p>
                    
                    <p>{{valid_post.post_status | default:'None available'}}</p>
                </div>

                <p>{{valid_post.description | default:'None available'}}</p>

                <div class = "postandfeedread-observation">
                    <h1>POST OBSERVATION</h1>

                    <div class = "observation-context">
                        <p>Size</p>

                        <p>{{valid_post.post_observation.size | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Depth</p>

                        <p>{{valid_post.post_observation.depth | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Density</p>

                        <p>{{valid_post.post_observation.density | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Weather</p>

                        <p>{{valid_post.post_observation.weather | default:'None available'}}</p>
                    </div>
                </div>

                <div class = "button">
                    <a class = "share-post" target = "blank">Share</a>
                </div>
            </div>
        {% endif %}
    </div>

    <script>
        {% if valid_post %}
            const link = encodeURI("{{scheme}}://{{host}}{% url 'Contributor Service Post Read' valid_post.id %}");

            const facebook = document.querySelector(".share-post");

            facebook.href = "https://www.facebook.com/share.php?u=" + link;
        {% endif %}
    </script>
{% endblock content %}