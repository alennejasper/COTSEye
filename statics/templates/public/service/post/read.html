{% extends "public/service/index/index.html" %}
{% load static %}


{% block content %}
    <div class = "postandfeedread-body">
        <!-- <div class = "postandfeedread-section">
            <h1>POST DETAILS</h1>
        </div> -->

        {% if valid_post %}
            <div class = "postandfeedread">
                <div class = "postandfeedread-header">
                    <div class = "header-context">
                        <img src = "{{valid_post.user.profile_photo.url}}">

                        <div class = "context-caption">
                            <p>{{valid_post.user}}</p>

                            <p>{{valid_post.location | default:'None available'}}</p>
                        </div>
                    </div>

                    <div class = "header-context">
                        <p>{{valid_post.post_status | default:'None available'}}</p>
                    
                        <p>{{valid_post.creation_date | date:'m/d/Y' | default:'None available'}}</p>
                    </div>
                </div>

                <div class = "postandfeedread-gallery">
                    {% for post_photo in valid_post.post_photos.all %}
                        <img src = "{{post_photo.post_photo.url}}">
                    {% endfor %}
                </div>

                <div class = "postandfeedread-origin">
                    <div class = "origin-context">
                        <p>Capture date:</p>

                        <p>{{valid_post.capture_date | date:'m/d/Y' | default:'None available'}}</p>
                    </div>
                </div>

                <div class = "postandfeedread-observation">
                    <div class = "observation-context">
                        <p>Average COTS size:</p>

                        <p>{{valid_post.post_observation.size | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Depth where the COTS was sighted:</p>

                        <p>{{valid_post.post_observation.depth | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Density COTS per mÂ²:</p>

                        <p>{{valid_post.post_observation.density | default:'0'}}</p>
                    </div>

                    <div class = "observation-context">
                        <p>Weather during sighting:</p>

                        <p>{{valid_post.post_observation.weather | default:'None available'}}</p>
                    </div>
                </div>

                <div class = "postandfeedread-description">
                    <div class = "description-context">
                        <h1>Description:</h1>
                        
                        <p>{{valid_post.description | default:'None available'}}</p>
                    </div>
                </div>

                <div class = "button">
                    <a class = "share-post" target = "blank">Share</a>
                </div>
            </div>
        {% endif %}
    </div>

    <script>
        {% if valid_post %}
            const link = encodeURI("{{scheme}}://{{host}}{% url 'Contributor Service Post Read' valid_post.id %}");

            const text = encodeURI("Hi everyone, I am excited to share that this report about Crown-of-thorns Starfish sighting in one of our marine areas has been validated! ðŸŒŠâœ¨");
    
            const facebook = document.querySelector(".share-post");

            facebook.href = "https://www.facebook.com/share.php?u=" + link + "&quote=" + text;
        {% endif %}
    </script>
{% endblock content %}