{% extends "officer/control/index/index.html" %}

{% block content %}
<div class="container-fluid mt-3">
    <h1 class="text-center">Add New Announcement</h1>
    
    <div class="card mt-4">
        <div class="card-body">
            <form id="announcementForm" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                
                
                <div class="form-group">
                    <h2>Photo Preview</h2>
                    <img id="photoPreview" src="#" alt="Image Preview" style="display: none; max-width: 100%; height: auto; margin:12px;">
                </div>
                
                <button type="submit" class="btn btn-primary">Add Announcement</button>
            </form>
        </div>
    </div>
</div>

<script>
    document.getElementById('announcementPhoto').addEventListener('change', function(event) {
        const photoPreview = document.getElementById('photoPreview');
        const file = event.target.files[0];
        
        if (file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                photoPreview.src = e.target.result;
                photoPreview.style.display = 'block';
            }
            
            reader.readAsDataURL(file);
        } else {
            photoPreview.src = '#';
            photoPreview.style.display = 'none';
        }
    });
</script>

<!-- <script>
    document.getElementById('announcementForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        let title = document.getElementById('announcementTitle').value;
        let date = document.getElementById('announcementDate').value;
        let location = document.getElementById('announcementLocation').value;
        let description = document.getElementById('announcementDescription').value;
        let user = document.getElementById('announcementUser').value;
        let photo = document.getElementById('announcementPhoto').files[0];

        let announcement = { title, date, location, description, user, photo };

        let announcements = JSON.parse(localStorage.getItem('announcements')) || [];
        announcements.push(announcement);
        localStorage.setItem('announcements', JSON.stringify(announcements));

        window.location.href = '{% url "Officer Control Announcement" %}';
    });
</script> -->
{% endblock %}
